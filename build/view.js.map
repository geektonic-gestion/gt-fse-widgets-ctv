{"version":3,"file":"view.js","mappings":"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","sources":["webpack://gt-fse-widgets-ctv/external module \"@wordpress/interactivity\"","webpack://gt-fse-widgets-ctv/webpack/bootstrap","webpack://gt-fse-widgets-ctv/webpack/runtime/make namespace object","webpack://gt-fse-widgets-ctv/./src/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// import { __ } from '@wordpress/i18n';\nimport { store, getContext, getElement, getConfig } from '@wordpress/interactivity';\n\n\n(function($){\n\n\n    // Check if elements with the class '.gt-widgets-ctv-resa' exist on the page\n    if (document.querySelectorAll('.gt-widgets-ctv-resa').length == 0) return;\n\n    // Function to dynamically load a JavaScript file\n    function loadScript(url, callback) {\n        const script = document.createElement('script');\n        script.src = url;\n        script.type = 'text/javascript';\n        script.async = true;\n        script.onload = callback;\n        document.head.appendChild(script);\n    }\n\n    // Function to dynamically load a CSS file\n    function loadStyle(url) {\n        const link = document.createElement('link');\n        link.href = url;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n    }\n\n\n    // Load js-cookie script\n    loadScript(gtFseCtvVars.pluginUrl + '/lib/jscookies/js.cookies.min.js');\n\n    // Load Moment.js first\n    loadScript(gtFseCtvVars.pluginUrl + '/lib/caleran/vendor/moment.min.js', function () {\n        // After Moment.js is loaded, load Caleran script\n        loadScript(gtFseCtvVars.pluginUrl + '/lib/caleran/js/caleran.min.js');\n    });\n\n    // Load Caleran CSS\n    loadStyle(gtFseCtvVars.pluginUrl + '/lib/caleran/css/caleran.min.css');\n    \n\n    $(window).scroll(function() {\n        if ($(this).scrollTop() > 300) {\n            $('.gt-widgets-ctv-resa__toggle').addClass('open');\n        }\n        else{\n            $('.gt-widgets-ctv-resa__toggle').removeClass('open');\n        }\n    });\n\n    $(document).on('click', '.gt-widgets-ctv-resa__toggle', function(){\n\n        $(this).parent().addClass('gt-widgets-ctv-resa--open');\n\n    });\n    $(document).on('click', '.gt-widgets-ctv-resa__hide', function(){\n\n        $(this).parent().removeClass('gt-widgets-ctv-resa--open');\n\n    });\n\n    $(window).on('load', function(){\n\n\n        const gtOptions = store('gt/options');\n\n        if(gtOptions && gtOptions.state){\n            if(gtOptions.state.opening_date){\n                var opening = moment(gtOptions.state.opening_date);\n            }\n            else{\n                var opening = moment();\n            }\n            if(gtOptions.state.closing_date){\n                var closing = moment(gtOptions.state.closing_date);\n            }\n            else{\n                var closing = moment().add(7,'days');\n            }\n        }\n\n\n        if(!Cookies.get('gt-arrival')){\n            var arrival = moment() > opening ? moment() : opening;\n        }\n        else{\n            var arrival = moment( Cookies.get('gt-arrival') );\n        }\n\n        if(!Cookies.get('gt-departure')){\n            var departure = moment(opening).add(7,'days');\n        }\n        else{\n            var departure = moment( Cookies.get('gt-departure') );\n        }\n\n        $('.gt-widgets-ctv-resa__form__entry--ranges').each(function(){\n            $('input', this).caleran({\n                locale:$('html').attr('lang'),\n                showFooter:false,\n                startDate:arrival,\n                endDate:departure,\n                autoCloseOnSelect:true,\n                minDate:opening,\n                maxDate:closing,\n                calendarCount: $(window).width() < 768 ? 1 : 2,\n                locale:$('html').attr('lang').split('-')[0],\n                cancelLabel:\"Annuler\",\n                applyLabel:\"Appliquer\",\n                // maxDate:closing > moment() ? closing : null,\n                oninit: function(caleran){\n                    let arrival = moment(caleran.config.startDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-arrival', arrival, { expires: inTwoHours() });\n                    let departure = moment(caleran.config.endDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-departure', departure, { expires: inTwoHours() });\n                },\n                onafterselect: function(caleran, startDate, endDate){\n                    let arrival = moment(startDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-arrival', arrival, { expires: inTwoHours() });\n                    let departure = moment(endDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-departure', departure, { expires: inTwoHours() });\n                    $('.gt-dispo-loaded').removeClass('gt-dispo-loaded');\n                    // update_disponibilites();\n\n                    $('.gt-widgets-ctv-resa-form__entry--ranges input').each(function(){\n                        let instance = $(this).data('caleran');\n                        instance.setStart(startDate);\n                        instance.setEnd(endDate);\n                    });\n\n                    // $(window).trigger('gt_dates_ranges_updated',[true]);\n                }\n            });\n        });\n    });\n    \n    function inTwoHours(){\n        let time = new Date();\n        time.setHours( time.getHours() + 2 );\n        return time;\n    }\n\n    $(document).on('submit', '.gt-widgets-ctv-resa__form', function(e) {\n        e.preventDefault();\n    });\n\n    $(document).on('click', '.gt-widgets-ctv-resa__form__entry--submit button', function () {\n        let ranges = $('.gt-widgets-ctv-resa__form__entry--ranges input').val().split(' - ');\n        let params = {\n            dateStart: ranges[0],\n            dateEnd: ranges[1],\n            travelers: $('.gt-widgets-ctv-resa__form__entry--personnes select').val(),\n            productType: $('.gt-widgets-ctv-resa__form__entry--type select').val(),\n        };\n        window.dispatchEvent(new CustomEvent('ctv-widget.open-search', { detail: params }));    \n    });\n\n    $(document).on('click', '.gt-widgets-ctv-resa__form__entry--submit.sticky button', function () {\n        let ranges = $('.gt-widgets-ctv-resa__form__entry--ranges.sticky input').val().split(' - ');\n        let params = {\n            dateStart: ranges[0],\n            dateEnd: ranges[1],\n            travelers: $('.gt-widgets-ctv-resa__form__entry--personnes.sticky select').val(),\n            productType: $('.gt-widgets-ctv-resa__form__entry--type.sticky select').val(),\n        };\n        window.dispatchEvent(new CustomEvent('ctv-widget.open-search', { detail: params }));    \n    });\n\n})(jQuery);"],"names":["store","getContext","getElement","getConfig","$","document","querySelectorAll","length","loadScript","url","callback","script","createElement","src","type","async","onload","head","appendChild","loadStyle","link","href","rel","gtFseCtvVars","pluginUrl","window","scroll","scrollTop","addClass","removeClass","on","parent","gtOptions","state","opening_date","opening","moment","closing_date","closing","add","Cookies","get","arrival","departure","each","caleran","locale","attr","showFooter","startDate","endDate","autoCloseOnSelect","minDate","maxDate","calendarCount","width","split","cancelLabel","applyLabel","oninit","config","format","set","expires","inTwoHours","onafterselect","instance","data","setStart","setEnd","time","Date","setHours","getHours","e","preventDefault","ranges","val","params","dateStart","dateEnd","travelers","productType","dispatchEvent","CustomEvent","detail","jQuery"],"sourceRoot":""}