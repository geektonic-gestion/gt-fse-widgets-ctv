{"version":3,"file":"view.js","mappings":"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","sources":["webpack://gt-fse-widgets-ctv/external window [\"wp\",\"i18n\"]","webpack://gt-fse-widgets-ctv/webpack/bootstrap","webpack://gt-fse-widgets-ctv/webpack/runtime/compat get default export","webpack://gt-fse-widgets-ctv/webpack/runtime/define property getters","webpack://gt-fse-widgets-ctv/webpack/runtime/hasOwnProperty shorthand","webpack://gt-fse-widgets-ctv/webpack/runtime/make namespace object","webpack://gt-fse-widgets-ctv/./src/view.js"],"sourcesContent":["module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { __ } from '@wordpress/i18n';\n\n\n(function($){\n\n    // Check if elements with the class '.gt-widgets-ctv-resa' exist on the page\n    if (document.querySelectorAll('.gt-widgets-ctv-resa').length == 0) return;\n\n    // Function to dynamically load a JavaScript file\n    function loadScript(url, callback) {\n        const script = document.createElement('script');\n        script.src = url;\n        script.type = 'text/javascript';\n        script.async = true;\n        script.onload = callback;\n        document.head.appendChild(script);\n    }\n\n    // Function to dynamically load a CSS file\n    function loadStyle(url) {\n        const link = document.createElement('link');\n        link.href = url;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n    }\n\n    // Load js-cookie script\n    loadScript('/wp-content/plugins/gt-fse-widgets-ctv/lib/jscookies/js.cookies.min.js');\n\n    // Load Moment.js first\n    loadScript('/wp-content/plugins/gt-fse-widgets-ctv/lib/caleran/vendor/moment.min.js', function () {\n        // After Moment.js is loaded, load Caleran script\n        loadScript('/wp-content/plugins/gt-fse-widgets-ctv/lib/caleran/js/caleran.min.js');\n    });\n\n    // Load Caleran CSS\n    loadStyle('/wp-content/plugins/gt-fse-widgets-ctv/lib/caleran/css/caleran.min.css');\n    \n\n    $(window).scroll(function() {\n        if ($(this).scrollTop() > 300) {\n            $('.gt-widgets-ctv-resa__toggle').addClass('open');\n        }\n        else{\n            $('.gt-widgets-ctv-resa__toggle').removeClass('open');\n        }\n    });\n\n    $(document).on('click', '.gt-widgets-ctv-resa__toggle', function(){\n\n        $(this).parent().addClass('gt-widgets-ctv-resa--open');\n\n    });\n    $(document).on('click', '.gt-widgets-ctv-resa__hide', function(){\n\n        $(this).parent().removeClass('gt-widgets-ctv-resa--open');\n\n    });\n\n    $(window).on('load', function(){\n\n        \n        let opening = moment();\n        let closing = moment().add(7,'days');\n\n        // Cookies.remove('gt-arrival');\n        // Cookies.remove('gt-departure');\n\n\n        if(!Cookies.get('gt-arrival')){\n            var arrival = moment() > opening ? moment() : opening;\n        }\n        else{\n            var arrival = moment( Cookies.get('gt-arrival') );\n        }\n\n        if(!Cookies.get('gt-departure')){\n            var departure = moment().add(7,'days');\n        }\n        else{\n            var departure = moment( Cookies.get('gt-departure') );\n        }\n\n        $('.gt-widgets-ctv-resa__form__entry--ranges').each(function(){\n            $('input', this).caleran({\n                locale:$('html').attr('lang'),\n                showFooter:false,\n                startDate:arrival,\n                endDate:departure,\n                autoCloseOnSelect:true,\n                minDate:opening,\n                calendarCount: $(window).width() < 768 ? 1 : 2,\n                locale:$('html').attr('lang').split('-')[0],\n                cancelLabel:__('Annuler', 'gt-fse-widgets-ctv'),\n                applyLabel:__('Appliquer', 'gt-fse-widgets-ctv'),\n                // maxDate:closing > moment() ? closing : null,\n                oninit: function(caleran){\n                    let arrival = moment(caleran.config.startDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-arrival', arrival, { expires: inTwoHours() });\n                    let departure = moment(caleran.config.endDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-departure', departure, { expires: inTwoHours() });\n                },\n                onafterselect: function(caleran, startDate, endDate){\n                    let arrival = moment(startDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-arrival', arrival, { expires: inTwoHours() });\n                    let departure = moment(endDate).format('YYYY-MM-DD');\n                    Cookies.set('gt-departure', departure, { expires: inTwoHours() });\n                    $('.gt-dispo-loaded').removeClass('gt-dispo-loaded');\n                    // update_disponibilites();\n\n                    $('.gt-widgets-ctv-resa-form__entry--ranges input').each(function(){\n                        let instance = $(this).data('caleran');\n                        instance.setStart(startDate);\n                        instance.setEnd(endDate);\n                    });\n\n                    // $(window).trigger('gt_dates_ranges_updated',[true]);\n                }\n            });\n        });\n    });\n    \n    function inTwoHours(){\n        let time = new Date();\n        time.setHours( time.getHours() + 2 );\n        return time;\n    }\n\n    $(document).on('submit', '.gt-widgets-ctv-resa__form', function(e) {\n        e.preventDefault();\n    });\n\n    $(document).on('click', '.gt-widgets-ctv-resa__form__entry--submit button', function () {\n        let ranges = $('.gt-widgets-ctv-resa__form__entry--ranges input').val().split(' - ');\n        let params = {\n            dateStart: ranges[0],\n            dateEnd: ranges[1],\n            travelers: $('.gt-widgets-ctv-resa__form__entry--personnes select').val(),\n        };\n        window.dispatchEvent(new CustomEvent('ctv-widget.open-search', { detail: params }));    \n    });\n\n})(jQuery);"],"names":["__","$","document","querySelectorAll","length","loadScript","url","callback","script","createElement","src","type","async","onload","head","appendChild","loadStyle","link","href","rel","window","scroll","scrollTop","addClass","removeClass","on","parent","opening","moment","closing","add","Cookies","get","arrival","departure","each","caleran","locale","attr","showFooter","startDate","endDate","autoCloseOnSelect","minDate","calendarCount","width","split","cancelLabel","applyLabel","oninit","config","format","set","expires","inTwoHours","onafterselect","instance","data","setStart","setEnd","time","Date","setHours","getHours","e","preventDefault","ranges","val","params","dateStart","dateEnd","travelers","dispatchEvent","CustomEvent","detail","jQuery"],"sourceRoot":""}